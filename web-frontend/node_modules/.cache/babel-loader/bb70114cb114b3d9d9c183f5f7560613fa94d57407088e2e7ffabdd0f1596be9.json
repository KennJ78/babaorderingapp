{"ast":null,"code":"const STORAGE_KEY = 'reservationItems';\nexport default class ReservationService {\n  static getItems() {\n    try {\n      const raw = localStorage.getItem(STORAGE_KEY);\n      return raw ? JSON.parse(raw) : [];\n    } catch (e) {\n      return [];\n    }\n  }\n  static setItems(items) {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(items));\n    ReservationService.notifyUpdated();\n  }\n  static addItem(newItem) {\n    const items = ReservationService.getItems();\n    const existingIndex = items.findIndex(i => i.id === newItem.id);\n    if (existingIndex >= 0) {\n      const mergedQty = (items[existingIndex].qty || 1) + (newItem.qty || 1);\n      items[existingIndex] = {\n        ...items[existingIndex],\n        qty: mergedQty\n      };\n    } else {\n      items.push({\n        ...newItem,\n        qty: newItem.qty || 1\n      });\n    }\n    ReservationService.setItems(items);\n  }\n  static updateQuantity(id, qty) {\n    if (qty < 1) return;\n    const items = ReservationService.getItems().map(i => i.id === id ? {\n      ...i,\n      qty\n    } : i);\n    ReservationService.setItems(items);\n  }\n  static removeItem(id) {\n    const items = ReservationService.getItems().filter(i => i.id !== id);\n    ReservationService.setItems(items);\n  }\n  static clear() {\n    ReservationService.setItems([]);\n  }\n  static getSubtotal() {\n    return ReservationService.getItems().reduce((total, item) => {\n      const price = parseFloat(String(item.price).replace('₱', '').replace(/,/g, '')) || 0;\n      const qty = item.qty || 1;\n      return total + price * qty;\n    }, 0);\n  }\n  static notifyUpdated() {\n    try {\n      const event = new Event('reservationUpdated');\n      window.dispatchEvent(event);\n    } catch (e) {\n      // noop\n    }\n  }\n}","map":{"version":3,"names":["STORAGE_KEY","ReservationService","getItems","raw","localStorage","getItem","JSON","parse","e","setItems","items","setItem","stringify","notifyUpdated","addItem","newItem","existingIndex","findIndex","i","id","mergedQty","qty","push","updateQuantity","map","removeItem","filter","clear","getSubtotal","reduce","total","item","price","parseFloat","String","replace","event","Event","window","dispatchEvent"],"sources":["C:/Users/Daenerys/Downloads/babaorderingapp/web-frontend/src/services/ReservationService.js"],"sourcesContent":["const STORAGE_KEY = 'reservationItems';\r\n\r\nexport default class ReservationService {\r\n  static getItems() {\r\n    try {\r\n      const raw = localStorage.getItem(STORAGE_KEY);\r\n      return raw ? JSON.parse(raw) : [];\r\n    } catch (e) {\r\n      return [];\r\n    }\r\n  }\r\n\r\n  static setItems(items) {\r\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(items));\r\n    ReservationService.notifyUpdated();\r\n  }\r\n\r\n  static addItem(newItem) {\r\n    const items = ReservationService.getItems();\r\n    const existingIndex = items.findIndex(i => i.id === newItem.id);\r\n    if (existingIndex >= 0) {\r\n      const mergedQty = (items[existingIndex].qty || 1) + (newItem.qty || 1);\r\n      items[existingIndex] = { ...items[existingIndex], qty: mergedQty };\r\n    } else {\r\n      items.push({ ...newItem, qty: newItem.qty || 1 });\r\n    }\r\n    ReservationService.setItems(items);\r\n  }\r\n\r\n  static updateQuantity(id, qty) {\r\n    if (qty < 1) return;\r\n    const items = ReservationService.getItems().map(i => i.id === id ? { ...i, qty } : i);\r\n    ReservationService.setItems(items);\r\n  }\r\n\r\n  static removeItem(id) {\r\n    const items = ReservationService.getItems().filter(i => i.id !== id);\r\n    ReservationService.setItems(items);\r\n  }\r\n\r\n  static clear() {\r\n    ReservationService.setItems([]);\r\n  }\r\n\r\n  static getSubtotal() {\r\n    return ReservationService.getItems().reduce((total, item) => {\r\n      const price = parseFloat(String(item.price).replace('₱', '').replace(/,/g, '')) || 0;\r\n      const qty = item.qty || 1;\r\n      return total + price * qty;\r\n    }, 0);\r\n  }\r\n\r\n  static notifyUpdated() {\r\n    try {\r\n      const event = new Event('reservationUpdated');\r\n      window.dispatchEvent(event);\r\n    } catch (e) {\r\n      // noop\r\n    }\r\n  }\r\n}\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}